{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\dry19\\\\Documents\\\\GitHub\\\\Juice-Quiz\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\dry19\\\\Documents\\\\GitHub\\\\Juice-Quiz\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\Users\\\\dry19\\\\Documents\\\\GitHub\\\\Juice-Quiz\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\dry19\\\\Documents\\\\GitHub\\\\Juice-Quiz\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\dry19\\\\Documents\\\\GitHub\\\\Juice-Quiz\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\dry19\\\\Documents\\\\GitHub\\\\Juice-Quiz\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{Component}from'react';import{Link}from'react-router-dom';import{Media}from'reactstrap';import'./showPlatformLIst.css';import Axios from\"axios\";// const places = \n// \t[\n// \t\t{\n// \t\t\tid: 0,\n// \t\t\tname: 'Classic Music',\n// \t\t\timage: './classicMusic.jpg',\n// \t\t\ttag: 'music',\n//             reputation:1000\n// \t\t} ,\n// \t\t{\n// \t\t\tid: 1,\n// \t\t\tname: 'Pop Music',\n// \t\t\timage: './popMusic.jpg',\n// \t\t\ttag: 'music',\n//             reputation:1000\n// \t\t}  ,\n// \t\t{\n// \t\t\tid: 2,\n// \t\t\tname: 'League of Legend',\n// \t\t\timage: './lol.jpg',\n// \t\t\ttag: 'game',\n//             reputation:1000\n// \t\t} ,\n// \t\t{\n// \t\t\tid: 3,\n// \t\t\tname: 'C++',\n// \t\t\timage: './c++.png',\n// \t\t\ttag: 'programing',\n//             reputation:1000\n// \t\t} ,\n// \t\t{\n// \t\t\tid: 4,\n// \t\t\tname: 'NBA',\n// \t\t\timage: './nba.png',\n// \t\t\ttag: 'sport',\n//             reputation:1000\n// \t\t} ,\n// \t\t{\n// \t\t\tid: 5,\n// \t\t\tname: 'Math',\n// \t\t\timage: './math.jpg',\n// \t\t\ttag: 'science',\n//             reputation:1000\n// \t\t} ,\n// \t\t{\n// \t\t\tid: 6,\n// \t\t\tname: 'Japanese Food',\n// \t\t\timage: './jpFood.jpg',\n// \t\t\ttag: 'food',\n//             reputation:1000\n// \t\t} ,\n// \t\t{\n// \t\t\tid: 7,\n// \t\t\tname: 'Itanlian Food',\n// \t\t\timage: './ITfood.jpg',\n// \t\t\ttag: 'food',\n//             reputation:1000\n// \t\t}  \n// \t];\nvar showPlatformList=/*#__PURE__*/function(_Component){_inherits(showPlatformList,_Component);var _super=_createSuper(showPlatformList);function showPlatformList(props){var _this;_classCallCheck(this,showPlatformList);_this=_super.call(this,props);_this.unsubscribe=function(PID){var url=\"https://juice-quiz.herokuapp.com/api/platform/delSub/\".concat(PID);//\tconst url= `http://localhost:3001/api/platform/delSub/${PID}`;\nAxios.delete(url,{data:{UID:localStorage.getItem(\"UID\")}}).then(function(response){console.log(response);});_this.get();};_this.state={trigger:false,UID:localStorage.getItem(\"UID\"),place:\"\",renderList:[]};_this.get();return _this;}_createClass(showPlatformList,[{key:\"get\",value:function(){var _get=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this2=this;var url,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this._isMounted=true;url=\"https://juice-quiz.herokuapp.com/api/user/subscribed/\".concat(this.state.UID);// const url= `http://localhost:3001/api/user/subscribed/${this.state.UID}`;\n_context.next=4;return Axios.get(url).then(function(res){return res.data;}).then(function(result){if(_this2._isMounted){//console.log(result);\n_this2.setState({places:result},function(){console.log(_this2.state.places);});_this2.setState({renderList:_this2.state.places});}});case 4:res=_context.sent;case 5:case\"end\":return _context.stop();}}},_callee,this);}));function get(){return _get.apply(this,arguments);}return get;}()},{key:\"render\",value://在这里保证点击每个图片可以转到对应的platform\nfunction render(){var _this3=this;var menu=this.state.renderList.map(function(place){return/*#__PURE__*/React.createElement(\"div\",{className:\"list\"},/*#__PURE__*/React.createElement(\"div\",{class:\"box\"},/*#__PURE__*/React.createElement(\"div\",{class:\"box-bg\"},/*#__PURE__*/React.createElement(\"img\",{src:place.Pcover})),/*#__PURE__*/React.createElement(\"div\",{class:\"box-text\"},/*#__PURE__*/React.createElement(\"h4\",null,place.Pname),/*#__PURE__*/React.createElement(\"button\",{className:\"boxbtn\",onClick:function onClick(){return _this3.unsubscribe(place.PID);}},\" unsubscribed\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"reputation\"},\"reputation: \",place.Rpoint,\"/1000\",/*#__PURE__*/React.createElement(\"progress\",{className:\"repoBar\",max:\"1000\",value:place.Rpoint},\" 10% \")));});return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"board-show\"},/*#__PURE__*/React.createElement(\"div\",{className:\"boardTitle-show\"},\"subscribed platform\"),menu));}}]);return showPlatformList;}(Component);export{showPlatformList as default};","map":{"version":3,"sources":["C:/Users/dry19/Documents/GitHub/Juice-Quiz/client/src/header/showPlatformLIst.js"],"names":["React","Component","Link","Media","Axios","showPlatformList","props","unsubscribe","PID","url","delete","data","UID","localStorage","getItem","then","response","console","log","get","state","trigger","place","renderList","_isMounted","res","result","setState","places","menu","map","Pcover","Pname","Rpoint"],"mappings":"+hCAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,SAAT,KAA0B,OAA1B,CACA,OAASC,IAAT,KAAqB,kBAArB,CAEA,OAASC,KAAT,KAAsB,YAAtB,CACA,MAAO,wBAAP,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;GAEyBC,CAAAA,gB,oHACjB,0BAAYC,KAAZ,CAAmB,kDACf,uBAAMA,KAAN,EADe,MA2B3BC,WA3B2B,CA2Bf,SAACC,GAAD,CAAO,CAChB,GAAMC,CAAAA,GAAG,gEAA2DD,GAA3D,CAAT,CACH;AAECJ,KAAK,CAACM,MAAN,CAAaD,GAAb,CAAkB,CAAEE,IAAI,CAAC,CAACC,GAAG,CAAEC,YAAY,CAACC,OAAb,CAAqB,KAArB,CAAN,CAAP,CAAlB,EAA8DC,IAA9D,CAAmE,SAACC,QAAD,CAAc,CACjFC,OAAO,CAACC,GAAR,CAAYF,QAAZ,EAEC,CAHD,EAIA,MAAKG,GAAL,GAUC,CA7CyB,CAEf,MAAKC,KAAL,CAAa,CACXC,OAAO,CAAC,KADG,CAETT,GAAG,CAACC,YAAY,CAACC,OAAb,CAAqB,KAArB,CAFK,CAGrBQ,KAAK,CAAC,EAHe,CAITC,UAAU,CAAC,EAJF,CAAb,CAML,MAAKJ,GAAL,GARoB,aAShB,C,4HAIP,+JACD,KAAKK,UAAL,CAAkB,IAAlB,CACQf,GAFP,gEAEqE,KAAKW,KAAL,CAAWR,GAFhF,EAGD;AAHC,sBAIkBR,CAAAA,KAAK,CAACe,GAAN,CAAUV,GAAV,EACjBM,IADiB,CACZ,SAAAU,GAAG,CAAE,CAAC,MAAOA,CAAAA,GAAG,CAACd,IAAX,CAAgB,CADV,EAEjBI,IAFiB,CAEX,SAAAW,MAAM,CAAG,CACf,GAAG,MAAI,CAACF,UAAR,CAAmB,CACnB;AACA,MAAI,CAACG,QAAL,CAAc,CAACC,MAAM,CAACF,MAAR,CAAd,CAA8B,UAAI,CAACT,OAAO,CAACC,GAAR,CAAY,MAAI,CAACE,KAAL,CAAWQ,MAAvB,EAAgC,CAAnE,EACA,MAAI,CAACD,QAAL,CAAc,CAACJ,UAAU,CAAC,MAAI,CAACH,KAAL,CAAWQ,MAAvB,CAAd,EAA+C,CAC9C,CAPgB,CAJlB,QAIMH,GAJN,0E,yFAoCJ;AAEA,iBAAQ,iBAEP,GAAMI,CAAAA,IAAI,CAAG,KAAKT,KAAL,CAAWG,UAAX,CAAsBO,GAAtB,CAA0B,SAACR,KAAD,CAAW,CACjD,mBAEC,2BAAK,SAAS,CAAC,MAAf,eACD,2BAAK,KAAK,CAAC,KAAX,eACD,2BAAK,KAAK,CAAC,QAAX,eACC,2BAAK,GAAG,CAAEA,KAAK,CAACS,MAAhB,EADD,CADC,cAID,2BAAK,KAAK,CAAC,UAAX,eACC,8BAAKT,KAAK,CAACU,KAAX,CADD,cAGA,8BAAQ,SAAS,CAAC,QAAlB,CAA2B,OAAO,CAAE,yBAAI,CAAA,MAAI,CAACzB,WAAL,CAAiBe,KAAK,CAACd,GAAvB,CAAJ,EAApC,kBAHA,CAJC,CADC,cAcA,2BAAK,SAAS,CAAC,YAAf,iBAA0Cc,KAAK,CAACW,MAAhD,sBACD,gCAAU,SAAS,CAAC,SAApB,CAA+B,GAAG,CAAC,MAAnC,CAA0C,KAAK,CAAEX,KAAK,CAACW,MAAvD,UADC,CAdA,CAFD,CAuBA,CAxBY,CAAb,CA0BA,mBACC,qDAEA,2BAAK,SAAS,CAAC,YAAf,eAEA,2BAAK,SAAS,CAAC,iBAAf,wBAFA,CAICJ,IAJD,CAFA,CADD,CAgBA,C,8BAhGiD5B,S,SAAzBI,gB","sourcesContent":["import React from 'react';\r\nimport { Component } from 'react';  \r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { Media } from 'reactstrap';\r\nimport './showPlatformLIst.css' \r\nimport Axios from \"axios\";  \r\n// const places = \r\n// \t[\r\n// \t\t{\r\n// \t\t\tid: 0,\r\n// \t\t\tname: 'Classic Music',\r\n// \t\t\timage: './classicMusic.jpg',\r\n// \t\t\ttag: 'music',\r\n//             reputation:1000\r\n// \t\t} ,\r\n// \t\t{\r\n// \t\t\tid: 1,\r\n// \t\t\tname: 'Pop Music',\r\n// \t\t\timage: './popMusic.jpg',\r\n// \t\t\ttag: 'music',\r\n//             reputation:1000\r\n// \t\t}  ,\r\n// \t\t{\r\n// \t\t\tid: 2,\r\n// \t\t\tname: 'League of Legend',\r\n// \t\t\timage: './lol.jpg',\r\n// \t\t\ttag: 'game',\r\n//             reputation:1000\r\n// \t\t} ,\r\n// \t\t{\r\n// \t\t\tid: 3,\r\n// \t\t\tname: 'C++',\r\n// \t\t\timage: './c++.png',\r\n// \t\t\ttag: 'programing',\r\n//             reputation:1000\r\n// \t\t} ,\r\n// \t\t{\r\n// \t\t\tid: 4,\r\n// \t\t\tname: 'NBA',\r\n// \t\t\timage: './nba.png',\r\n// \t\t\ttag: 'sport',\r\n//             reputation:1000\r\n// \t\t} ,\r\n// \t\t{\r\n// \t\t\tid: 5,\r\n// \t\t\tname: 'Math',\r\n// \t\t\timage: './math.jpg',\r\n// \t\t\ttag: 'science',\r\n//             reputation:1000\r\n// \t\t} ,\r\n// \t\t{\r\n// \t\t\tid: 6,\r\n// \t\t\tname: 'Japanese Food',\r\n// \t\t\timage: './jpFood.jpg',\r\n// \t\t\ttag: 'food',\r\n//             reputation:1000\r\n// \t\t} ,\r\n// \t\t{\r\n// \t\t\tid: 7,\r\n// \t\t\tname: 'Itanlian Food',\r\n// \t\t\timage: './ITfood.jpg',\r\n// \t\t\ttag: 'food',\r\n//             reputation:1000\r\n// \t\t}  \r\n  \r\n\r\n\t\r\n// \t];\r\n\r\n    export default class showPlatformList extends Component {\r\n        constructor(props) {\r\n            super(props);\r\n            this.state = { \r\n              trigger:false, \r\n                UID:localStorage.getItem(\"UID\"),\r\n\t\t\t\tplace:\"\",\r\n                renderList:[]\r\n            };   \r\n       this.get();\r\n          }\r\n\r\n\t\r\n           \r\n\t\t  async get(){\r\n\t\t\tthis._isMounted = true;\r\n\t\t   const url = `https://juice-quiz.herokuapp.com/api/user/subscribed/${this.state.UID}`;\r\n\t\t\t// const url= `http://localhost:3001/api/user/subscribed/${this.state.UID}`;\r\n\t\t  const res = await Axios.get(url)\r\n\t\t  .then(res=>{return res.data})\r\n\t\t  .then( result =>{\r\n\t\t\t  if(this._isMounted){\r\n\t\t\t  //console.log(result);\r\n\t\t\t  this.setState({places:result},()=>{console.log(this.state.places);});\r\n\t\t\t  this.setState({renderList:this.state.places});}          \r\n\t\t   });\r\n\t\t}\r\n\r\nunsubscribe=(PID)=>{\r\n\t\t const url = `https://juice-quiz.herokuapp.com/api/platform/delSub/${PID}`;\r\n//\tconst url= `http://localhost:3001/api/platform/delSub/${PID}`;\r\n\t     \r\n\tAxios.delete(url, { data:{UID: localStorage.getItem(\"UID\")}}).then((response) => { \r\n\tconsole.log(response); \r\n   \r\n\t}); \r\n this.get();\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t}\r\n\r\n   \r\n  \r\n//在这里保证点击每个图片可以转到对应的platform\r\n    \r\nrender(){ \r\n        \r\n\tconst menu = this.state.renderList.map((place) => {\r\n\t\treturn(\r\n\t\t\t\r\n\t\t\t<div className=\"list\">   \r\n\t\t<div class=\"box\">\r\n\t<div class=\"box-bg\">\r\n\t\t<img src={place.Pcover} />\r\n\t</div>\r\n\t<div class=\"box-text\"> \r\n\t\t<h4>{place.Pname}</h4> \r\n\t\t\r\n\t<button className=\"boxbtn\" onClick={()=>this.unsubscribe(place.PID)}> unsubscribed</button>\r\n\t</div>\r\n</div>\r\n\r\n\t\t\t \r\n\t\t\t\r\n\t\t\t<div className='reputation' >reputation: {place.Rpoint}/1000\r\n\t\t<progress className='repoBar'  max=\"1000\" value={place.Rpoint}> 10% </progress>\r\n\t\t \r\n\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t   \r\n\t\t);\r\n\t});\r\n   \r\n\treturn (\r\n\t\t<>\r\n\t\t\r\n\t\t<div className='board-show'>\r\n\r\n\t\t<div className=\"boardTitle-show\">subscribed platform</div>\r\n\t\t\r\n\t\t{menu}\r\n\r\n\r\n\t\t</div>\r\n\r\n\t\t\t  </>\r\n\t\t\t  \r\n\t);\r\n  \r\n}\r\n    \r\n}"]},"metadata":{},"sourceType":"module"}