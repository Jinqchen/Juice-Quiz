{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\dry19\\\\Documents\\\\GitHub\\\\Juice-Quiz\\\\client\\\\src\\\\singlePlatform\\\\singlePlatForm.js\";\nimport React from 'react';\nimport { Component } from 'react';\nimport './singlePlatForm.css';\nimport { Media } from 'reactstrap';\nimport Axios from \"axios\"; // const places = \n// \t[\n// \t\t{\n// \t\t\tid: 0,\n// \t\t\tname: '1',\n// \t\t\timage: './classicMusic.jpg',\n// \t\t\towner: 'A',\n// \t\t\tdiscrpiton:'abababaaba',\n//             rate:1000,\n// \t\t\thot:10\n// \t\t} ,\n// \t\t{\n// \t\t\tid: 1,\n// \t\t\tname: '122',\n// \t\t\timage: './classicMusic.jpg',\n// \t\t\towner: 'A',\n// \t\t\tdiscrpiton:'abababaaba',\n//             rate:10,\n// \t\t\thot:5\n// \t\t} ,{\n// \t\t\tid: 2,\n// \t\t\tname: '1',\n// \t\t\timage: './classicMusic.jpg',\n// \t\t\towner: 'A',\n// \t\t\tdiscrpiton:'abababaaba',\n//             rate:1010,\n// \t\t\thot:2\n// \t\t} ,{\n// \t\t\tid: 3,\n// \t\t\tname: '1',\n// \t\t\timage: './classicMusic.jpg',\n// \t\t\towner: 'A',\n// \t\t\tdiscrpiton:'abababaaba',\n//             rate:10100,\n// \t\t\thot:1\n// \t\t} ,\t];\n\nconst PID = localStorage.getItem('PID'); // const url = 'https://juice-quiz.herokuapp.com/api/platform/quizlist';\n// const url= `http://localhost:3001/api/platform/quizlist/${PID}`;\n// const res = await Axios.get(url)\n//       .then(res=>{return res.data})\n// console.log(res)\n\nvar isrander = false;\nexport default class singlePlatForm extends Component {\n  constructor(props) {\n    super(props);\n    this._isMounted = false;\n\n    this.componentDidMount = () => {\n      this.get();\n      this.setState({\n        rander: true\n      });\n    };\n\n    this.state = {\n      //决定是否显示subscribe按钮和订阅按钮\n      subscribed: false,\n      authority: false,\n      places: '',\n      renderList: [{}],\n      hotac: true,\n      rateac: true,\n      Pname: localStorage.getItem('Pname'),\n      Pcover: localStorage.getItem('Pcover'),\n      PID: localStorage.getItem('PID'),\n      rander: false\n    };\n    this.get();\n  }\n\n  sortByHot() {\n    var places = this.state.places;\n\n    if (this.state.hotac) {\n      places.sort(function (a, b) {\n        return -a.hot + b.hot;\n      });\n      this.setState({\n        hotac: false\n      });\n    } else {\n      places.sort(function (a, b) {\n        return a.hot - b.hot;\n      });\n      this.setState({\n        hotac: true\n      });\n    }\n\n    this.setState({\n      rateac: true\n    });\n    console.log(places);\n    this.setState({\n      renderList: {\n        places\n      }\n    });\n  }\n\n  sortByRate() {\n    var places = this.state.places;\n\n    if (this.state.rateac) {\n      places.sort(function (a, b) {\n        return -a.rate + b.rate;\n      });\n      this.setState({\n        rateac: false\n      });\n    } else {\n      places.sort(function (a, b) {\n        return a.rate - b.rate;\n      });\n      this.setState({\n        rateac: true\n      });\n    }\n\n    this.setState({\n      hotac: true\n    });\n    console.log(places);\n    this.setState({\n      renderList: {\n        places\n      }\n    });\n  } //申请和订阅在这里\n\n\n  subscribe() {\n    this.setState({\n      subscribed: true\n    });\n  }\n\n  apply() {\n    this.setState({\n      apply: true\n    });\n  }\n\n  // async get(){\t\n  // \t\t// const url = 'https://juice-quiz.herokuapp.com/api/platform/quizlist';\n  // \t\t const url= `http://localhost:3001/api/platform/quizlist/${this.state.PID}`;\n  // \t\t await Axios.get(url, \n  // \t\t  ).then(res=>{return res.data})\n  // \t\t  .then((response) => {\n  //           this.setState({places:response},() => console.log(this.state.places)) \t   \n  // \t\t });\n  // }\n  async get() {\n    this._isMounted = true; // const url = 'https://juice-quiz.herokuapp.com/api/platform/quizlist';\n\n    const url = `http://localhost:3001/api/platform/quizlist/${this.state.PID}`;\n    const res = await Axios.get(url).then(res => {\n      return res.data;\n    }).then(result => {\n      if (this._isMounted) {\n        console.log(result);\n        this.setState({\n          places: result\n        }, () => {\n          console.log(this.state.places);\n        });\n        this.setState({\n          places: this.state.renderList\n        });\n      }\n    });\n  }\n\n  render() {\n    if (this.state.rander) {\n      const menu = this.state.renderList.map(place => {\n        console.log(this.state.places);\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"item\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 4\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"title\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 5\n          }\n        }, place.name, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"rate\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 6\n          }\n        }, \"\\u2B50: \", place.rate, \" \\uD83D\\uDD25\\uFF1A\", place.hot)), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"content\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 6\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"discription\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 6\n          }\n        }, place.discrpiton), /*#__PURE__*/React.createElement(Media, {\n          object: true,\n          src: '../' + place.image,\n          alt: place.id,\n          className: \"userIcon\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 6\n          }\n        })));\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"platFormButton\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: '../' + this.state.Pcover,\n      className: \"icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"h\", {\n      className: \"platFormName\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 13\n      }\n    }, this.state.Pname), !this.state.subscribed && /*#__PURE__*/React.createElement(\"button\", {\n      className: \"platformaccount\",\n      onClick: () => this.subscribe(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 29\n      }\n    }, \"subscribe\") || /*#__PURE__*/React.createElement(\"button\", {\n      className: \"platformaccount\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 117\n      }\n    }, \"subscribed \\u221A\"), !this.state.apply && /*#__PURE__*/React.createElement(\"button\", {\n      className: \"platformaccount\",\n      onClick: () => this.apply(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 24\n      }\n    }, \"Apply to be co-owner\") || /*#__PURE__*/React.createElement(\"button\", {\n      className: \"platformaccount\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 119\n      }\n    }, \"apply has been sent\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sort\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"sortButton\",\n      onClick: () => this.sortByRate(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 4\n      }\n    }, \"\\u2B50 Rate \"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"sortButton\",\n      onClick: () => this.sortByHot(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 13\n      }\n    }, \"\\uD83D\\uDD25 Hot \")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"platFormlist\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 4\n      }\n    }));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/dry19/Documents/GitHub/Juice-Quiz/client/src/singlePlatform/singlePlatForm.js"],"names":["React","Component","Media","Axios","PID","localStorage","getItem","isrander","singlePlatForm","constructor","props","_isMounted","componentDidMount","get","setState","rander","state","subscribed","authority","places","renderList","hotac","rateac","Pname","Pcover","sortByHot","sort","a","b","hot","console","log","sortByRate","rate","subscribe","apply","url","res","then","data","result","render","menu","map","place","name","discrpiton","image","id"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Component } from 'react';  \r\nimport './singlePlatForm.css'\r\nimport { Media } from 'reactstrap';\r\nimport Axios from \"axios\";\r\n// const places = \r\n// \t[\r\n// \t\t{\r\n// \t\t\tid: 0,\r\n// \t\t\tname: '1',\r\n// \t\t\timage: './classicMusic.jpg',\r\n// \t\t\towner: 'A',\r\n// \t\t\tdiscrpiton:'abababaaba',\r\n//             rate:1000,\r\n// \t\t\thot:10\r\n// \t\t} ,\r\n// \t\t{\r\n// \t\t\tid: 1,\r\n// \t\t\tname: '122',\r\n// \t\t\timage: './classicMusic.jpg',\r\n// \t\t\towner: 'A',\r\n// \t\t\tdiscrpiton:'abababaaba',\r\n//             rate:10,\r\n// \t\t\thot:5\r\n// \t\t} ,{\r\n// \t\t\tid: 2,\r\n// \t\t\tname: '1',\r\n// \t\t\timage: './classicMusic.jpg',\r\n// \t\t\towner: 'A',\r\n// \t\t\tdiscrpiton:'abababaaba',\r\n//             rate:1010,\r\n// \t\t\thot:2\r\n// \t\t} ,{\r\n// \t\t\tid: 3,\r\n// \t\t\tname: '1',\r\n// \t\t\timage: './classicMusic.jpg',\r\n// \t\t\towner: 'A',\r\n// \t\t\tdiscrpiton:'abababaaba',\r\n//             rate:10100,\r\n// \t\t\thot:1\r\n// \t\t} ,\t];\r\n\r\nconst PID = localStorage.getItem('PID')\r\n// const url = 'https://juice-quiz.herokuapp.com/api/platform/quizlist';\r\n// const url= `http://localhost:3001/api/platform/quizlist/${PID}`;\r\n// const res = await Axios.get(url)\r\n//       .then(res=>{return res.data})\r\n// console.log(res)\r\nvar isrander=false;\r\nexport default class singlePlatForm extends Component {\r\n\t_isMounted = false;\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\t//决定是否显示subscribe按钮和订阅按钮\r\n\t\t\tsubscribed:false,\r\n\t\t\tauthority:false,\r\n\t\t\tplaces: '',\r\n            renderList:[{}],\r\n\t\t\thotac:true,\r\n\t\t\trateac:true,\r\n\t\t\tPname :localStorage.getItem('Pname'),\r\n\t\t\tPcover:localStorage.getItem('Pcover'),\r\n\t\t\tPID: localStorage.getItem('PID'),\r\n\t\t\trander:false\r\n\t\t};\r\n         this.get();\r\n\t}\r\n    \r\n\r\n\t\r\n componentDidMount=()=>{\r\n\tthis.get() ;\r\n\tthis.setState({rander:true})\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\tsortByHot(){ \r\n\t\tvar places = this.state.places\r\n\t\tif(this.state.hotac){\r\n          places.sort(function(a, b){return -a.hot + b.hot});\r\n\t\t   this.setState({hotac:false});\r\n\t\t}\r\n\t\telse{\r\n\t\t places.sort(function(a, b){return a.hot - b.hot}); \r\n\t\t this.setState({hotac:true});\r\n\t\t}\r\n\t\t\r\n\t\tthis.setState({rateac:true})\r\n\t\tconsole.log(places)\r\n\t\t\r\n\t\tthis.setState({renderList: {places} })\r\n\t}\r\n\t\r\n\r\n\tsortByRate(){\r\n\t\tvar places = this.state.places\r\n\t\tif(this.state.rateac){\r\n\t\t\tplaces.sort(function(a, b){return -a.rate + b.rate}); \r\n\t\t\tthis.setState({rateac:false})\r\n\t\t  }\r\n\t\t  else{\r\n\t\t   places.sort(function(a, b){return a.rate - b.rate}); \r\n\t\t   this.setState({rateac:true})\r\n\t\t  }\r\n\t\t  this.setState({hotac:true})\r\n\t\tconsole.log(places)\r\n\t\tthis.setState({renderList: {places} })\r\n\r\n\t}\r\n \r\n\r\n\r\n\r\n\r\n\r\n\t//申请和订阅在这里\r\n\tsubscribe(){\r\n\r\n\t   \r\n\t\tthis.setState({subscribed:true})\r\n\r\n\t}\r\n\r\n\r\n\tapply(){\r\n\t\tthis.setState({apply:true})\r\n\t};\r\n    \r\n\t// async get(){\t\r\n\t// \t\t// const url = 'https://juice-quiz.herokuapp.com/api/platform/quizlist';\r\n\t// \t\t const url= `http://localhost:3001/api/platform/quizlist/${this.state.PID}`;\r\n\t// \t\t await Axios.get(url, \r\n\t// \t\t  ).then(res=>{return res.data})\r\n\t// \t\t  .then((response) => {\r\n    //           this.setState({places:response},() => console.log(this.state.places)) \t   \r\n\t// \t\t });\r\n\t\t\t \r\n\t\t\t\t\t   \r\n\t// }\r\n\tasync get(){\r\n\t\tthis._isMounted = true;\r\n       // const url = 'https://juice-quiz.herokuapp.com/api/platform/quizlist';\r\n\t\t const url= `http://localhost:3001/api/platform/quizlist/${this.state.PID}`;\r\n      const res = await Axios.get(url)\r\n      .then(res=>{return res.data})\r\n      .then( result =>{\r\n\t\t  if(this._isMounted){\r\n\t\t  console.log(result);\r\n          this.setState({places:result},()=>{console.log(this.state.places);});\r\n         \r\n          \r\n          this.setState({places:this.state.renderList});}\r\n          \r\n       });\r\n    }\r\n\r\n   \r\n\r\n\trender() {     \r\n\t\t\r\n\t\t\r\n\t\tif(this.state.rander){const menu = this.state.renderList.map((place) => {\r\n\t\tconsole.log(this.state.places)\t\r\n\t\treturn(\r\n\t\t \r\n\t\t\t<div className=\"item\">  \r\n\t\t\t <div className='title'>\r\n\t\t\t\t {place.name} \r\n\t\t\t\t <div className='rate'>⭐: {place.rate} 🔥：{place.hot}</div> \r\n\t\t\t </div >\r\n\t\t\t \t<div className='content'> \r\n\t\t\t\t <div className='discription'>{place.discrpiton}</div>\r\n\t\t\t \t<Media object src={'../'+place.image} alt={place.id} className='userIcon'/> \r\n\t\t\t\t </div>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t);\r\n\t});}\r\n\t\t\r\n\t\treturn (\r\n            <div> \r\n            <div className=\"header\">\r\n                \r\n            </div>\r\n\t\t\t<div className=\"platFormButton\">\r\n\t\t\t\t{/* 此处读取平台的图片！ */}\r\n                <img src= {'../'+this.state.Pcover}  className='icon'></img> \r\n            <h className='platFormName'>{this.state.Pname}</h>\r\n\t\t\t{!this.state.subscribed&&<button className='platformaccount'  onClick={()=>this.subscribe()}>subscribe</button>||<button className='platformaccount' >subscribed √</button>}\r\n\t\t\t{!this.state.apply&&<button className='platformaccount'  onClick={()=>this.apply()}>Apply to be co-owner</button>||<button className='platformaccount' >apply has been sent</button>}\r\n          \r\n\t\t     \r\n            </div>\r\n\t\t\t<div className=\"sort\">\r\n\r\n\t\t\t\r\n\t\t\t<button className='sortButton'onClick={()=>this.sortByRate()}>⭐ Rate </button>\r\n            <button className='sortButton' onClick={()=>this.sortByHot()}>🔥 Hot </button>\r\n\t\t\t</div>\r\n \r\n\t\t\t<div className='platFormlist'> \r\n\t\t\t{/* <div>{menu}</div> */}\r\n\t\t\t </div>\r\n\t\t</div>\r\n\t\t)\r\n\t}\r\n    \r\n}"]},"metadata":{},"sourceType":"module"}