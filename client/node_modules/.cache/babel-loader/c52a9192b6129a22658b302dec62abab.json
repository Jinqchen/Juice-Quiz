{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\dry19\\\\Documents\\\\GitHub\\\\Juice-Quiz\\\\client\\\\src\\\\header\\\\showPlatformLIst.js\";\nimport React from 'react';\nimport { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Media } from 'reactstrap';\nimport './showPlatformLIst.css';\nimport Axios from \"axios\"; // const places = \n// \t[\n// \t\t{\n// \t\t\tid: 0,\n// \t\t\tname: 'Classic Music',\n// \t\t\timage: './classicMusic.jpg',\n// \t\t\ttag: 'music',\n//             reputation:1000\n// \t\t} ,\n// \t\t{\n// \t\t\tid: 1,\n// \t\t\tname: 'Pop Music',\n// \t\t\timage: './popMusic.jpg',\n// \t\t\ttag: 'music',\n//             reputation:1000\n// \t\t}  ,\n// \t\t{\n// \t\t\tid: 2,\n// \t\t\tname: 'League of Legend',\n// \t\t\timage: './lol.jpg',\n// \t\t\ttag: 'game',\n//             reputation:1000\n// \t\t} ,\n// \t\t{\n// \t\t\tid: 3,\n// \t\t\tname: 'C++',\n// \t\t\timage: './c++.png',\n// \t\t\ttag: 'programing',\n//             reputation:1000\n// \t\t} ,\n// \t\t{\n// \t\t\tid: 4,\n// \t\t\tname: 'NBA',\n// \t\t\timage: './nba.png',\n// \t\t\ttag: 'sport',\n//             reputation:1000\n// \t\t} ,\n// \t\t{\n// \t\t\tid: 5,\n// \t\t\tname: 'Math',\n// \t\t\timage: './math.jpg',\n// \t\t\ttag: 'science',\n//             reputation:1000\n// \t\t} ,\n// \t\t{\n// \t\t\tid: 6,\n// \t\t\tname: 'Japanese Food',\n// \t\t\timage: './jpFood.jpg',\n// \t\t\ttag: 'food',\n//             reputation:1000\n// \t\t} ,\n// \t\t{\n// \t\t\tid: 7,\n// \t\t\tname: 'Itanlian Food',\n// \t\t\timage: './ITfood.jpg',\n// \t\t\ttag: 'food',\n//             reputation:1000\n// \t\t}  \n// \t];\n\nexport default class showPlatformList extends Component {\n  constructor(props) {\n    super(props);\n\n    this.unsubscribe = PID => {\n      //const url = `https://juice-quiz.herokuapp.com/api/platform/delSub/${this.state.PID}`;\n      const url = `http://localhost:3001/api/platform/delSub/${PID}`;\n      Axios.delete(url, {\n        data: {\n          UID: localStorage.getItem(\"UID\")\n        }\n      }).then(response => {\n        console.log(response);\n      });\n      this.get();\n    };\n\n    this.state = {\n      trigger: false,\n      UID: localStorage.getItem(\"UID\"),\n      place: \"\",\n      renderList: []\n    };\n    this.get();\n  }\n\n  async get() {\n    this._isMounted = true; //const url = `https://juice-quiz.herokuapp.com/api/user/subscribed/${this.state.UID}`;\n\n    const url = `http://localhost:3001/api/user/subscribed/${this.state.UID}`;\n    const res = await Axios.get(url).then(res => {\n      return res.data;\n    }).then(result => {\n      if (this._isMounted) {\n        //console.log(result);\n        this.setState({\n          places: result\n        }, () => {\n          console.log(this.state.places);\n        });\n        this.setState({\n          renderList: this.state.places\n        });\n      }\n    });\n  }\n\n  //在这里保证点击每个图片可以转到对应的platform\n  render() {\n    const menu = this.state.renderList.map(place => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"list\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 4\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"box\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 3\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"box-bg\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 2\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: place.Pcover,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 3\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        class: \"box-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 2\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 3\n        }\n      }, place.Pname), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"boxbtn\",\n        onClick: () => this.unsubscribe(place.PID),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 2\n        }\n      }, \" unsubscribed\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"reputation\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 4\n        }\n      }, \"reputation: \", place.Rpoint, \"/1000\", /*#__PURE__*/React.createElement(\"progress\", {\n        className: \"repoBar\",\n        max: \"1000\",\n        value: place.Rpoint,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 3\n        }\n      }, \" 10% \")));\n    });\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"board-show\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"boardTitle-show\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 3\n      }\n    }, \"subscribed platform\"), menu));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/dry19/Documents/GitHub/Juice-Quiz/client/src/header/showPlatformLIst.js"],"names":["React","Component","Link","Media","Axios","showPlatformList","constructor","props","unsubscribe","PID","url","delete","data","UID","localStorage","getItem","then","response","console","log","get","state","trigger","place","renderList","_isMounted","res","result","setState","places","render","menu","map","Pcover","Pname","Rpoint"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Component } from 'react';  \r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { Media } from 'reactstrap';\r\nimport './showPlatformLIst.css' \r\nimport Axios from \"axios\";  \r\n// const places = \r\n// \t[\r\n// \t\t{\r\n// \t\t\tid: 0,\r\n// \t\t\tname: 'Classic Music',\r\n// \t\t\timage: './classicMusic.jpg',\r\n// \t\t\ttag: 'music',\r\n//             reputation:1000\r\n// \t\t} ,\r\n// \t\t{\r\n// \t\t\tid: 1,\r\n// \t\t\tname: 'Pop Music',\r\n// \t\t\timage: './popMusic.jpg',\r\n// \t\t\ttag: 'music',\r\n//             reputation:1000\r\n// \t\t}  ,\r\n// \t\t{\r\n// \t\t\tid: 2,\r\n// \t\t\tname: 'League of Legend',\r\n// \t\t\timage: './lol.jpg',\r\n// \t\t\ttag: 'game',\r\n//             reputation:1000\r\n// \t\t} ,\r\n// \t\t{\r\n// \t\t\tid: 3,\r\n// \t\t\tname: 'C++',\r\n// \t\t\timage: './c++.png',\r\n// \t\t\ttag: 'programing',\r\n//             reputation:1000\r\n// \t\t} ,\r\n// \t\t{\r\n// \t\t\tid: 4,\r\n// \t\t\tname: 'NBA',\r\n// \t\t\timage: './nba.png',\r\n// \t\t\ttag: 'sport',\r\n//             reputation:1000\r\n// \t\t} ,\r\n// \t\t{\r\n// \t\t\tid: 5,\r\n// \t\t\tname: 'Math',\r\n// \t\t\timage: './math.jpg',\r\n// \t\t\ttag: 'science',\r\n//             reputation:1000\r\n// \t\t} ,\r\n// \t\t{\r\n// \t\t\tid: 6,\r\n// \t\t\tname: 'Japanese Food',\r\n// \t\t\timage: './jpFood.jpg',\r\n// \t\t\ttag: 'food',\r\n//             reputation:1000\r\n// \t\t} ,\r\n// \t\t{\r\n// \t\t\tid: 7,\r\n// \t\t\tname: 'Itanlian Food',\r\n// \t\t\timage: './ITfood.jpg',\r\n// \t\t\ttag: 'food',\r\n//             reputation:1000\r\n// \t\t}  \r\n  \r\n\r\n\t\r\n// \t];\r\n\r\n    export default class showPlatformList extends Component {\r\n        constructor(props) {\r\n            super(props);\r\n            this.state = { \r\n              trigger:false, \r\n                UID:localStorage.getItem(\"UID\"),\r\n\t\t\t\tplace:\"\",\r\n                renderList:[]\r\n            };   \r\n       this.get();\r\n          }\r\n\r\n\t\r\n           \r\n\t\t  async get(){\r\n\t\t\tthis._isMounted = true;\r\n\t\t   //const url = `https://juice-quiz.herokuapp.com/api/user/subscribed/${this.state.UID}`;\r\n\t\t\t const url= `http://localhost:3001/api/user/subscribed/${this.state.UID}`;\r\n\t\t  const res = await Axios.get(url)\r\n\t\t  .then(res=>{return res.data})\r\n\t\t  .then( result =>{\r\n\t\t\t  if(this._isMounted){\r\n\t\t\t  //console.log(result);\r\n\t\t\t  this.setState({places:result},()=>{console.log(this.state.places);});\r\n\t\t\t  this.setState({renderList:this.state.places});}          \r\n\t\t   });\r\n\t\t}\r\n\r\nunsubscribe=(PID)=>{\r\n\t\t //const url = `https://juice-quiz.herokuapp.com/api/platform/delSub/${this.state.PID}`;\r\n\tconst url= `http://localhost:3001/api/platform/delSub/${PID}`;\r\n\t     \r\n\tAxios.delete(url, { data:{UID: localStorage.getItem(\"UID\")}}).then((response) => { \r\n\tconsole.log(response); \r\n   \r\n\t}); \r\n this.get();\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t}\r\n\r\n   \r\n  \r\n//在这里保证点击每个图片可以转到对应的platform\r\n    \r\nrender(){ \r\n        \r\n\tconst menu = this.state.renderList.map((place) => {\r\n\t\treturn(\r\n\t\t\t\r\n\t\t\t<div className=\"list\">   \r\n\t\t<div class=\"box\">\r\n\t<div class=\"box-bg\">\r\n\t\t<img src={place.Pcover} />\r\n\t</div>\r\n\t<div class=\"box-text\"> \r\n\t\t<h4>{place.Pname}</h4> \r\n\t\t\r\n\t<button className=\"boxbtn\" onClick={()=>this.unsubscribe(place.PID)}> unsubscribed</button>\r\n\t</div>\r\n</div>\r\n\r\n\t\t\t \r\n\t\t\t\r\n\t\t\t<div className='reputation' >reputation: {place.Rpoint}/1000\r\n\t\t<progress className='repoBar'  max=\"1000\" value={place.Rpoint}> 10% </progress>\r\n\t\t \r\n\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t   \r\n\t\t);\r\n\t});\r\n   \r\n\treturn (\r\n\t\t<>\r\n\t\t\r\n\t\t<div className='board-show'>\r\n\r\n\t\t<div className=\"boardTitle-show\">subscribed platform</div>\r\n\t\t\r\n\t\t{menu}\r\n\r\n\r\n\t\t</div>\r\n\r\n\t\t\t  </>\r\n\t\t\t  \r\n\t);\r\n  \r\n}\r\n    \r\n}"]},"metadata":{},"sourceType":"module"}